#!/usr/bin/env ruby

ENV["BUNDLE_GEMFILE"] = File.expand_path("../Gemfile", File.dirname(__FILE__))
require "bundler/setup"

# Note that contracts.ruby has two specific ruby-version specific libraries, which we have vendored into lib/
if (Gem::Version.new(RUBY_VERSION) >= Gem::Version.new("3.0.0")) # ruby3
  $LOAD_PATH.unshift(File.expand_path(File.join(__dir__, "../lib/contracts-ruby3/lib")))
else # ruby2
  $LOAD_PATH.unshift(File.expand_path(File.join(__dir__, "../lib/contracts-ruby2/lib")))
end

# We don't need Contract outside of normal development
VALID = [true, nil]
class Contract < Contracts::Decorator
  def self.valid?(arg, contract)
    VALID
  end
end

require "entitlements"
exitcode = Entitlements::Cli.run
exitcode ||= 0
exit exitcode
